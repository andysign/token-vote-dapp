(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(28567)}])},28567:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var n=s(85893),a=s(67294);let r=e=>{let[t,s]=(0,a.useState)(),[r,l]=(0,a.useState)(!1),i={address:e.address};return r?(0,n.jsx)("p",{children:"Requesting tokens from API..."}):t?(0,n.jsx)("div",{children:(0,n.jsxs)("p",{children:["Result from API: ",t.result?"worked":"failed"]})}):(0,n.jsx)("div",{className:"card bg-primary text-primary-content mt-4",children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h2",{className:"card-title",children:(0,n.jsx)("p",{className:"text-center",children:"Mint tokens"})}),(0,n.jsx)("button",{className:"btn btn-active btn-neutral",onClick:()=>{l(!0),fetch("".concat("https://tokenvotedapp-9jc31xz7.b4a.run","/mint-tokens"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(e=>e.json()).then(e=>{s(e),l(!1)})},children:"Request tokens"})]})})};var l=s(69077);let i=e=>{let{address:t,canSelfDelegate:s}=e,{config:a}=(0,l.PJ)({address:t,abi:[{inputs:[{internalType:"address",name:"delegatee",type:"address"}],name:"delegate",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"delegate",args:[(0,l.mA)().address]}),{data:r,isLoading:i,isSuccess:c,write:d}=(0,l.GG)(a);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"card bg-primary text-primary-content mt-4",children:[(0,n.jsxs)("h3",{className:"card-title",children:[(0,n.jsx)("small",{children:"Can delegate (hasBalance):"}),(0,n.jsx)("span",{children:s?"Yes":"No"})]}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,n.jsx)("fieldset",{disabled:!s,children:(0,n.jsx)("div",{className:"card bg-primary text-primary-content mt-4",children:(0,n.jsx)("button",{disabled:!d,onClick:()=>null==d?void 0:d(),className:"btn btn-active btn-neutral",children:"Self Delegating"})})})})}),(0,n.jsx)("div",{className:"card-footer text-xs text-warning text-sm",children:(0,n.jsx)("small",{children:(0,n.jsxs)("code",{style:{whiteSpace:"pre-wrap"},children:[i&&(0,n.jsx)(n.Fragment,{children:"Loading.."}),c&&(0,n.jsxs)(n.Fragment,{children:["Tx: ",JSON.stringify(r)]})," "]})})})]})})},c=()=>{let[e,t]=(0,a.useState)(),[s,r]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{fetch("".concat("https://tokenvotedapp-9jc31xz7.b4a.run","/contract-address")).then(e=>e.json()).then(e=>{t(e),r(!1)})},[]),s)?(0,n.jsx)("p",{children:"Loading token address from API..."}):e?(0,n.jsxs)("div",{children:["Token address from API:",(0,n.jsx)("br",{}),(0,n.jsx)("p",{style:{fontWeight:"bold"},children:e.result})]}):(0,n.jsx)("p",{children:"No token address information"})},d=()=>{let{address:e}=(0,l.mA)(),{data:t,isError:s,isLoading:a}=(0,l.do)({address:"0xE4df6fBbC99c537CC0D1935a404727399A47F469",abi:[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],functionName:"balanceOf",args:[e]}),d="number"==typeof t||"bigint"==typeof t?t:0,h=0!==Number(d);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"card bg-primary text-primary-content mt-4",children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h2",{className:"card-title",children:"MyToken Infos : "}),(0,n.jsx)(o,{}),(0,n.jsx)(x,{isLoading:a,isError:s,balance:d}),(0,n.jsx)(c,{}),(0,n.jsx)(r,{address:e})]})}),(0,n.jsx)("div",{className:"card bg-primary text-primary-content mt-4",children:(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)(i,{address:"0xE4df6fBbC99c537CC0D1935a404727399A47F469",canSelfDelegate:h})})})]})};function o(){let{data:e,isError:t,isLoading:s}=(0,l.do)({address:"0xE4df6fBbC99c537CC0D1935a404727399A47F469",abi:[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"}],functionName:"name"});return s?(0,n.jsx)("div",{children:"Fetching name…"}):t?(0,n.jsx)("div",{children:"Error fetching name"}):(0,n.jsxs)("div",{children:["Token name: ","string"==typeof e?e:0]})}function x(e){let{isLoading:t,isError:s,balance:a}=e;return t?(0,n.jsx)("div",{children:"Fetching balance…"}):s?(0,n.jsx)("div",{children:"Error fetching token balance. Pls connect wlt!"}):(0,n.jsxs)("div",{children:["Balance (MTK): ",a.toString()]})}let h="10000000000000000000",m=["Ocean's Eleven","Eleven Ensemble","Team 0xb","The Eleventh Hour","Decem + Unus"],j=e=>{let{}=e,[t,s]=(0,a.useState)(""),[r,l]=(0,a.useState)(!1),[i,c]=(0,a.useState)(null),d=async()=>{l(!0),await fetch("".concat("https://tokenvotedapp-9jc31xz7.b4a.run","/total-supply")).then(e=>e.json()).then(e=>{s(e.result),l(!1)})},o=!!t&&BigInt(t)>BigInt(h);console.log(h);let x=async()=>{l(!0),fetch("".concat("https://tokenvotedapp-9jc31xz7.b4a.run","/deploy-ballot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proposalsArr:m})}).then(e=>e.json()).then(e=>{c(e.result),console.log(e),l(!1)})};return((0,a.useEffect)(()=>{d()},[]),r)?(0,n.jsx)("p",{children:"Fetching total supply ..."}):(0,n.jsxs)("div",{className:"card bg-primary text-primary-content mt-4",children:[(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h2",{className:"card-title",children:(0,n.jsxs)("p",{className:"text-center",children:["Total supply : ",(BigInt(t)/BigInt(1e18)).toString()," MTK"]})}),(0,n.jsx)("h3",{children:(0,n.jsxs)("p",{className:"text-center",children:["Threshold : ",(BigInt(h)/BigInt(1e18)).toString()," MTK"]})}),o?(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,n.jsx)("button",{className:"btn btn-active btn-neutral",onClick:x,children:"Deploy Tokenized Ballot"}),(0,n.jsx)("p",{children:"Default proposals for the new Team name are : "}),m.map((e,t)=>(0,n.jsx)("div",{children:e},t))]}):(0,n.jsx)("div",{children:"You cannot deploy Tokenized Ballot yet, total supply is less than the minimum requested "})]}),(0,n.jsx)("div",{className:"card-footer text-xs py-4 text-center text-warning",children:(0,n.jsx)("small",{children:(0,n.jsxs)("code",{style:{whiteSpace:"pre-wrap"},children:[" ",i&&(0,n.jsx)(n.Fragment,{children:JSON.stringify(i).split(",")[1]})," "]})})})]})},p=e=>{let{tokenizedBallot:t,tokenizedBallotAbi:s,votingPower:r}=e,[i,c]=(0,a.useState)("0"),{config:d}=(0,l.PJ)({address:null==t?void 0:t.address,abi:s,functionName:"vote",args:[i,r]}),{data:o,isLoading:x,isSuccess:h,write:m}=(0,l.GG)(d);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"card bg-primary text-primary-content mt-4",children:[(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)("h3",{className:"card-title form-horizontal text-center m-0",children:(0,n.jsx)("form",{onSubmit:e=>e.preventDefault(),className:"col-sm-2",children:(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("label",{className:"mx-6",children:"Vote Proposal Index:"}),(0,n.jsx)("input",{className:"text-info mx-6 p-2",type:"number",min:0,max:4,value:i,onChange:e=>c(e.target.value)}),(0,n.jsx)("button",{disabled:!m,className:"btn btn-active btn-neutral",onClick:()=>null==m?void 0:m(),children:"Submit"})]})})})}),(0,n.jsx)("div",{className:"card-footer text-xs text-warning text-sm",children:(0,n.jsx)("small",{children:(0,n.jsxs)("code",{style:{whiteSpace:"pre-wrap"},children:[x&&(0,n.jsx)(n.Fragment,{children:"Loading.."}),h&&(0,n.jsxs)(n.Fragment,{children:["Transaction: ",JSON.stringify(o)]})," "]})})})]})})},u=e=>{let{tokenizedBallot:t,tokenizedBallotAbi:s}=e,{data:a}=(0,l.do)({address:t.address,abi:s,functionName:"winningProposal",args:[]});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"card bg-secondary text-primary-content mt-4",children:(0,n.jsx)("div",{className:"card-body p-0",children:(0,n.jsx)("h3",{className:"card-title text-center m-0",children:(0,n.jsxs)("p",{className:"text-xs",children:["WinningProposal: ",(null==a?void 0:a.toString())||"N/A"]})})})})})},b=e=>{let{tokenizedBallot:t,tokenizedBallotAbi:s}=e,{data:a}=(0,l.do)({address:t.address,abi:s,functionName:"votingPower",args:[(0,l.mA)().address]}),r=(a?BigInt(Number(a)):0n)/BigInt(1*1e18);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"card bg-secondary text-primary-content mt-4",children:[(0,n.jsxs)("div",{className:"card-body p-0",children:[(0,n.jsx)("h3",{className:"card-title text-center m-0",children:(0,n.jsxs)("p",{className:"text-xs",children:["Vote ",null==t?void 0:t.address]})}),(0,n.jsx)("h3",{className:"card-title m-0",children:(0,n.jsxs)("p",{className:"text-center",children:["Power",(0,n.jsxs)("span",{className:"text-xs",children:[(null==r?void 0:r.toString())=="0"?"Zero":null==r?void 0:r.toString()," MTK Power"]})]})}),(0,n.jsx)("h3",{className:"card-title m-0",children:(0,n.jsx)("p",{className:"text-center",children:(null==r?void 0:r.toString())=="0"&&"You do not have the power to vote"})})]}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsxs)("ul",{className:"text-center text-sm",children:[(0,n.jsx)("div",{children:(0,n.jsx)("b",{children:"Voting_Options:"})}),m.map((e,t)=>(0,n.jsx)("li",{className:"p-0",style:{display:"flex"},children:(0,n.jsxs)("p",{className:"m-0",children:[(0,n.jsx)("code",{children:t})," - ",e]})},t))]})})]}),(null==t?void 0:t.address)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(p,{tokenizedBallot:t,tokenizedBallotAbi:s,votingPower:a})}),(0,n.jsx)("br",{}),(0,n.jsx)(u,{tokenizedBallot:t,tokenizedBallotAbi:s})]})},g=e=>{let{tokenizedBallot:t,tokenizedBallotAbi:s}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"card bg-primary text-primary-content mt-4",children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h2",{className:"card-title",children:"Tokenized Ballot Infos : "}),(0,n.jsxs)("div",{children:["Name : ",t.name]}),(0,n.jsxs)("div",{children:["Address : ",t.address]}),(0,n.jsxs)("div",{children:["AbiType : ",typeof s]})]})})})},y=e=>{let{}=e,[t,s]=(0,a.useState)(),[r,l]=(0,a.useState)(),[i,c]=(0,a.useState)(!0),d=async()=>{await fetch("".concat("https://tokenvotedapp-9jc31xz7.b4a.run","/contract-ballot-address")).then(e=>e.json()).then(e=>{e&&e.result&&s({name:"Tokenized Ballot",address:e.result}),c(!1)}).catch(e=>console.log(e))},o=async()=>{await fetch("".concat("https://tokenvotedapp-9jc31xz7.b4a.run","/contract-ballot-abi")).then(e=>e.json()).then(e=>{e&&e.result&&l(e.result),c(!1)}).catch(e=>console.log(e))};return((0,a.useEffect)(()=>{d(),o()},[]),!i&&t&&r)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g,{tokenizedBallot:t,tokenizedBallotAbi:r}),(0,n.jsx)(j,{}),(0,n.jsx)(b,{tokenizedBallot:t,tokenizedBallotAbi:r})]}):(0,n.jsx)("p",{children:"Fetching Tokenized Ballot contract..."})},f=e=>{let{data:t,isError:s,isLoading:a}=(0,l.KQ)({address:e.address});return a?(0,n.jsx)("div",{children:"Fetching balance…"}):s?(0,n.jsx)("div",{children:"Error fetching balance"}):(0,n.jsx)("div",{className:"card bg-primary text-primary-content mt-4",children:(0,n.jsxs)("div",{className:"card-body",children:["My current Balance: ",null==t?void 0:t.formatted," ",null==t?void 0:t.symbol]})})},v=()=>{let{address:e,isConnecting:t,isDisconnected:s}=(0,l.mA)(),{chain:a}=(0,l.LN)();return e?(0,n.jsxs)("div",{style:{backgroundColor:"transparent",boxShadow:"  0px 4px 8px -2px rgba(9, 30, 66, 0.25), 0px 0px 0px 1px rgba(9, 30, 66, 0.08)",padding:"12px",borderRadius:"5%"},children:[(0,n.jsxs)("p",{children:["Your account address is ",e]}),(0,n.jsxs)("p",{children:["Connected to the network ",null==a?void 0:a.name]}),(0,n.jsx)(f,{address:e})]}):t?(0,n.jsx)("div",{children:(0,n.jsx)("p",{children:"Loading..."})}):s?(0,n.jsx)("div",{children:(0,n.jsx)("p",{children:"Wallet disconnected. Connect wallet to continue"})}):(0,n.jsx)("div",{children:(0,n.jsx)("p",{children:"Connect wallet to continue"})})},N=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex items-center flex-col flex-grow pt-10",children:(0,n.jsxs)("div",{className:"px-5",children:[(0,n.jsxs)("h1",{className:"text-center mb-8",children:[(0,n.jsx)("span",{className:"block text-2xl mb-2",children:"Welcome to"}),(0,n.jsx)("span",{className:"block text-4xl font-bold",children:"Our DApp - Team 11"})]}),(0,n.jsx)(k,{})]})})});function k(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-center text-lg",children:" My Wallet information "}),(0,n.jsx)(v,{}),(0,n.jsx)("br",{}),(0,n.jsx)(d,{}),(0,n.jsx)("br",{}),(0,n.jsx)(y,{})]})}var w=N}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);